---
import { getLangFromUrl, useTranslations, useTranslatedPath } from '../i18n/utils';

const today = new Date();
const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
const translatePath = useTranslatedPath(lang);
---

<footer class="site-footer">
	<div class="footer-inner">
		<div class="footer-brand">
			<p class="footer-title">{t('site.title')}</p>
			<p class="footer-copy">{t('site.footer_copy')}</p>
		</div>
		<div class="footer-links">
			<a href={translatePath('/blog')}>{t('nav.blog')}</a>
			<a href={translatePath('/about')}>{t('nav.about')}</a>
			<a href={translatePath('/privacy')}>{t('nav.privacy')}</a>
		</div>
		<div class="social-links">
			<a class="icon-link" href="mailto:rainiee@gmail.com" aria-label="Email">
				<span class="sr-only">Email</span>
				<svg viewBox="0 0 24 24" aria-hidden="true" width="20" height="20">
					<path
						fill="currentColor"
						d="M4 5h16a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2zm0 2v.2l8 4.8 8-4.8V7H4zm16 10V9.3l-7.47 4.48a1 1 0 0 1-1.06 0L4 9.3V17h16z"
					></path>
				</svg>
			</a>
			<a
				class="icon-link"
				href="https://twitter.com/rainee0716"
				target="_blank"
				rel="noreferrer"
				aria-label="Twitter"
			>
				<span class="sr-only">Twitter</span>
				<svg viewBox="0 0 24 24" aria-hidden="true" width="20" height="20">
					<path
						fill="currentColor"
						d="M19.5 7.5c.01.14.01.29.01.44 0 4.5-3.43 9.7-9.7 9.7-1.93 0-3.72-.56-5.23-1.52.27.03.54.04.82.04 1.6 0 3.07-.55 4.25-1.46a3.42 3.42 0 0 1-3.19-2.38c.2.03.4.05.62.05.3 0 .6-.04.88-.12a3.42 3.42 0 0 1-2.74-3.35v-.04c.46.26.99.42 1.56.44a3.42 3.42 0 0 1-1.06-4.56 9.72 9.72 0 0 0 7.06 3.58 3.86 3.86 0 0 1-.09-.78 3.42 3.42 0 0 1 5.91-2.34 6.73 6.73 0 0 0 2.17-.83 3.41 3.41 0 0 1-1.5 1.89 6.78 6.78 0 0 0 1.96-.53 7.35 7.35 0 0 1-1.7 1.77z"
					></path>
				</svg>
			</a>
		</div>
	</div>
	<p class="copyright">&copy; {today.getFullYear()} Rainiee. All rights reserved.</p>
</footer>

<style>
	.site-footer {
		margin-top: 4rem;
		padding: 3rem 1.5rem 4rem;
		background: rgba(255, 255, 255, 0.85);
		border-top: 1px solid var(--border);
	}

	.footer-inner {
		width: min(var(--page-max), 100%);
		margin: 0 auto;
		display: grid;
		grid-template-columns: 1.5fr 1fr auto;
		gap: 1.5rem;
		align-items: center;
	}

	.footer-title {
		font-weight: 700;
		margin: 0 0 0.4rem;
		color: rgb(var(--ink));
	}

	.footer-copy {
		margin: 0;
		color: rgb(var(--ink-soft));
	}

	.footer-links {
		display: flex;
		gap: 1rem;
		flex-wrap: wrap;
	}

	.footer-links a {
		color: rgb(var(--ink));
		font-weight: 600;
	}

	.social-links {
		display: flex;
		gap: 0.8rem;
		color: rgb(var(--ink-soft));
	}

	.icon-link {
		display: inline-flex;
		align-items: center;
		justify-content: center;
		width: 34px;
		height: 34px;
		border-radius: 999px;
		border: 1px solid transparent;
		color: rgb(var(--ink-soft));
		transition:
			color 0.2s var(--ease-out),
			background 0.2s var(--ease-out),
			border-color 0.2s var(--ease-out);
	}

	.icon-link:hover {
		color: var(--accent-strong);
		background: rgba(15, 118, 110, 0.08);
		border-color: rgba(15, 118, 110, 0.2);
	}

	.copyright {
		margin: 2rem auto 0;
		text-align: center;
		color: rgb(var(--ink-soft));
		font-size: 0.9rem;
	}

	@media (max-width: 900px) {
		.footer-inner {
			grid-template-columns: 1fr;
			text-align: center;
		}

		.footer-links,
		.social-links {
			justify-content: center;
		}
	}
</style>
